<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Carlos Buenosvinos  | 3 commands for working with remote machines</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="3 commands for working with remote machines" />
<meta property="og:description" content="These days I&#8217;m playing a bit with 5 Raspberries 2B (4 cores and 1 GB of RAM) in order to build a Docker cluster. There are different options: Docker Swarm over Consul/Etcd/Zookeper, Kubernetes by Google, etc. I just want to share some interesting commands for working with remote machines that have helped me to build such a cluster: ssh-copy-id, nmap and csshx." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://carlosbuenosvinos.com/3-commands-for-working-with-remote-machines/" />
<meta property="article:published_time" content="2015-12-14T08:00:47+00:00" />
<meta property="article:modified_time" content="2015-12-14T08:00:47+00:00" />
<meta itemprop="name" content="3 commands for working with remote machines">
<meta itemprop="description" content="These days I&#8217;m playing a bit with 5 Raspberries 2B (4 cores and 1 GB of RAM) in order to build a Docker cluster. There are different options: Docker Swarm over Consul/Etcd/Zookeper, Kubernetes by Google, etc. I just want to share some interesting commands for working with remote machines that have helped me to build such a cluster: ssh-copy-id, nmap and csshx.">


<meta itemprop="datePublished" content="2015-12-14T08:00:47&#43;00:00" />
<meta itemprop="dateModified" content="2015-12-14T08:00:47&#43;00:00" />
<meta itemprop="wordCount" content="681">



<meta itemprop="keywords" content="cluster,csshx,docker,multiple terminals,nmap,raspberry,rasperry pi,remote machines,ssh-copy-id," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="3 commands for working with remote machines"/>
<meta name="twitter:description" content="These days I&#8217;m playing a bit with 5 Raspberries 2B (4 cores and 1 GB of RAM) in order to build a Docker cluster. There are different options: Docker Swarm over Consul/Etcd/Zookeper, Kubernetes by Google, etc. I just want to share some interesting commands for working with remote machines that have helped me to build such a cluster: ssh-copy-id, nmap and csshx."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://carlosbuenosvinos.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      Carlos Buenosvinos
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">3 commands for working with remote machines</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">3 commands for working with remote machines</h1>
      
      <p class="tracked">
         By <strong>Carlos Buenosvinos</strong>
      </p>
      
      
      <time class="f6 mv4 dib tracked" datetime="2015-12-14T08:00:47Z">December 14, 2015</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>These days I&#8217;m playing a bit with 5 Raspberries 2B (4 cores and 1 GB of RAM) in order to build a Docker cluster. There are different options: Docker Swarm over Consul/Etcd/Zookeper, Kubernetes by Google, etc. I just want to share some interesting commands for working with remote machines that have helped me to build such a cluster: ssh-copy-id, nmap and csshx.</p>

<h3 id="1-ssh-copy-id">1. ssh-copy-id</h3>

<p>Because I&#8217;m accessing my raspberries via SSH, I don&#8217;t want to enter password all the time, so I want to use public/private keys to do so. ssh-copy-id to the rescue.</p>

<p>Installs your public key in a remote machine&#8217;s authorized_keys. For MacOS, you will need to install it, for example, using &#8220;brew install ssh-copy-id&#8221;.</p>

<p>ssh-copy-id is a script that uses ssh to log into a remote machine (presumably using a login password, so password authentication should be enabled, unless you&#8217;ve done some clever use of multiple identities) It also changes the permissions of the remote user&#8217;s home, ~/.ssh, and ~/.ssh/authorized_keys to remove group writability (which would otherwise prevent you from logging in, if the remote sshd has StrictModes set in its configuration). If the -i option is given then the identity file (defaults to ~/.ssh/id_rsa.pub) is used, regardless of whether there are any keys in your ssh-agent. Otherwise, if this: ssh-add -L provides any output, it uses that in preference to the identity file. If the -i option is used, or the ssh-add produced no output, then it uses the contents of the identity file. Once it has one or more fingerprints (by whatever means) it uses ssh to append them to ~/.ssh/authorized_keys on the remote machine (creating the file, and directory, if necessary).</p>

<p><a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png" rel="attachment wp-att-740"><img class="size-large wp-image-740 aligncenter" src="https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52-1024x554.png?resize=620%2C335" alt="Screen Shot 2015-12-13 at 13.51.52" width="620" height="335" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png?resize=1024%2C554&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png?resize=300%2C162&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png?resize=768%2C416&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png?w=1240&ssl=1 1240w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.51.52.png?w=1860&ssl=1 1860w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<h3 id="2-nmap">2. nmap</h3>

<p>After pluging my Rasberry PIs in, I don&#8217;t exactly know what are their IPs, so I need a way to discover that. Nmap to the rescue.</p>

<p>Nmap (&#8220;Network Mapper&#8221;) is a free and open source (<a href="https://nmap.org/data/COPYING">license</a>) utility for network discovery and security auditing. Many systems and network administrators also find it useful for tasks such as network inventory, managing service upgrade schedules, and monitoring host or service uptime. Nmap uses raw IP packets in novel ways to determine what hosts are available on the network, what services (application name and version) those hosts are offering, what operating systems (and OS versions) they are running, what type of packet filters/firewalls are in use, and dozens of other characteristics. It was designed to rapidly scan large networks, but works fine against single hosts. Nmap runs on all major computer operating systems, and official binary packages are available for Linux, Windows, and Mac OS X. In addition to the classic command-line Nmap executable, the Nmap suite includes an advanced GUI and results viewer (<a href="https://nmap.org/zenmap/">Zenmap</a>), a flexible data transfer, redirection, and debugging tool (<a href="https://nmap.org/ncat/">Ncat</a>), a utility for comparing scan results (<a href="https://nmap.org/ndiff/">Ndiff</a>), and a packet generation and response analysis tool (<a href="https://nmap.org/nping/">Nping</a>). On MacOS, install it using &#8220;brew install nmap&#8221;.</p>

<p>Because I have my Mac running as a DHCP server on 192.168.2.1 net, I can discover Raspberry IPs, pluging and scanning.</p>

<p><a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png" rel="attachment wp-att-742"><img class="size-large wp-image-742 aligncenter" src="https://i0.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12-1024x554.png?resize=620%2C335" alt="Screen Shot 2015-12-13 at 13.59.12" width="620" height="335" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png?resize=1024%2C554&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png?resize=300%2C162&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png?resize=768%2C416&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png?w=1240&ssl=1 1240w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-13.59.12.png?w=1860&ssl=1 1860w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<h3 id="3-csshx">3. csshx</h3>

<p>Sometimes, I need to perform a task in all the PIs (install python for running ansible, for example, check some configuration, etc.). csshX is a Cluster SSH tool using Mac OS X Terminal.app</p>

<p>csshX is a tool to allow simultaneous control of multiple ssh sessions. host1, host2, etc. are either remote hostnames or remote cluster names. csshX will attempt to create an ssh session to each remote host in separate Terminal.app windows. A master window will also be created. All keyboard input in the master will be sent to all the slave windows. To specify the username for each host, the hostname can be prepended by user@. Similarly, appending :port will set the port to ssh to. You can also use hostname ranges, to specify many hosts. &#8220;brew install csshx&#8221;.</p>

<p><a href="https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png" rel="attachment wp-att-744"><img class="size-large wp-image-744 aligncenter" src="https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06-1024x554.png?resize=620%2C335" alt="Screen Shot 2015-12-13 at 14.06.06" width="620" height="335" srcset="https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png?resize=1024%2C554&ssl=1 1024w, https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png?resize=300%2C162&ssl=1 300w, https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png?resize=768%2C416&ssl=1 768w, https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png?w=1240&ssl=1 1240w, https://i2.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.06.06.png?w=1860&ssl=1 1860w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<p><a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png" rel="attachment wp-att-743"><img class="size-large wp-image-743 aligncenter" src="https://i0.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48-1024x640.png?resize=620%2C388" alt="Screen Shot 2015-12-13 at 14.07.48" width="620" height="388" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png?resize=1024%2C640&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png?resize=300%2C188&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png?resize=768%2C480&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png?w=1240&ssl=1 1240w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2015/12/Screen-Shot-2015-12-13-at-14.07.48.png?w=1860&ssl=1 1860w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<p>You can type in the red terminal and all the keys will be repeated into all the terminals. If you want to perform something in a specific terminal, just click on it and do it. Then go back into the red terminal.</p>

<p>Hope it helps!</p><ul class="pa0">
  
   <li class="list">
     <a href="/tags/cluster" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">cluster</a>
   </li>
  
   <li class="list">
     <a href="/tags/csshx" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">csshx</a>
   </li>
  
   <li class="list">
     <a href="/tags/docker" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">docker</a>
   </li>
  
   <li class="list">
     <a href="/tags/multiple-terminals" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">multiple terminals</a>
   </li>
  
   <li class="list">
     <a href="/tags/nmap" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">nmap</a>
   </li>
  
   <li class="list">
     <a href="/tags/raspberry" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">raspberry</a>
   </li>
  
   <li class="list">
     <a href="/tags/rasperry-pi" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">rasperry pi</a>
   </li>
  
   <li class="list">
     <a href="/tags/remote-machines" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">remote machines</a>
   </li>
  
   <li class="list">
     <a href="/tags/ssh-copy-id" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ssh-copy-id</a>
   </li>
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://carlosbuenosvinos.com/" >
    &copy; 2019 Carlos Buenosvinos
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
