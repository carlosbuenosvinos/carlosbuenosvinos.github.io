<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Carlos Buenosvinos  | Working at the same time in a project and its dependencies: Composer and path type repository</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.58.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    
    
    <meta property="og:title" content="Working at the same time in a project and its dependencies: Composer and path type repository" />
<meta property="og:description" content="With the Domain-Driven Design, Microservices and API explosion, I see more teams working in a base project, such as a Web, and integrating other private packages they develop in a different repository. For example, working on the Web and an API client for a external REST service at the same time.

For example, at @AtrapaloEng, our sales development team (checkout process, purchases, orders, payments, etc.) integrates different payment methods into the web so users, specially Latam ones, can be happier using their preferred payment methods. They create a repository for each of the new payment methods we support as a external package. Sometimes a developer in the team must work with different projects at the same time, the Web and the payment method in development.

In this scenario, one option is work on the payment package, tag, push, go to the base project and update dependencies with Composer. As you can see, it&#8217;s a bit slower, how we can improve this process? Composer to the rescue!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://carlosbuenosvinos.com/working-at-the-same-time-in-a-project-and-its-dependencies-composer-and-path-type-repository/" />
<meta property="article:published_time" content="2016-03-24T15:36:10+00:00" />
<meta property="article:modified_time" content="2016-03-24T15:36:10+00:00" />
<meta itemprop="name" content="Working at the same time in a project and its dependencies: Composer and path type repository">
<meta itemprop="description" content="With the Domain-Driven Design, Microservices and API explosion, I see more teams working in a base project, such as a Web, and integrating other private packages they develop in a different repository. For example, working on the Web and an API client for a external REST service at the same time.

For example, at @AtrapaloEng, our sales development team (checkout process, purchases, orders, payments, etc.) integrates different payment methods into the web so users, specially Latam ones, can be happier using their preferred payment methods. They create a repository for each of the new payment methods we support as a external package. Sometimes a developer in the team must work with different projects at the same time, the Web and the payment method in development.

In this scenario, one option is work on the payment package, tag, push, go to the base project and update dependencies with Composer. As you can see, it&#8217;s a bit slower, how we can improve this process? Composer to the rescue!">


<meta itemprop="datePublished" content="2016-03-24T15:36:10&#43;00:00" />
<meta itemprop="dateModified" content="2016-03-24T15:36:10&#43;00:00" />
<meta itemprop="wordCount" content="557">



<meta itemprop="keywords" content="composer,dependencies,monolithic repository,packagist," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Working at the same time in a project and its dependencies: Composer and path type repository"/>
<meta name="twitter:description" content="With the Domain-Driven Design, Microservices and API explosion, I see more teams working in a base project, such as a Web, and integrating other private packages they develop in a different repository. For example, working on the Web and an API client for a external REST service at the same time.

For example, at @AtrapaloEng, our sales development team (checkout process, purchases, orders, payments, etc.) integrates different payment methods into the web so users, specially Latam ones, can be happier using their preferred payment methods. They create a repository for each of the new payment methods we support as a external package. Sometimes a developer in the team must work with different projects at the same time, the Web and the payment method in development.

In this scenario, one option is work on the payment package, tag, push, go to the base project and update dependencies with Composer. As you can see, it&#8217;s a bit slower, how we can improve this process? Composer to the rescue!"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://carlosbuenosvinos.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      Carlos Buenosvinos
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        POSTS
      </p>
      <h1 class="f1 athelas mb1">Working at the same time in a project and its dependencies: Composer and path type repository</h1>
      
      <p class="tracked">
         By <strong>Carlos Buenosvinos</strong>
      </p>
      
      
      <time class="f6 mv4 dib tracked" datetime="2016-03-24T15:36:10Z">March 24, 2016</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>With the Domain-Driven Design, Microservices and API explosion, I see more teams working in a base project, such as a Web, and integrating other private packages they develop in a different repository. For example, working on the Web and an API client for a external REST service at the same time.</p>

<p>For example, at @AtrapaloEng, our sales development team (checkout process, purchases, orders, payments, etc.) integrates different payment methods into the web so users, specially Latam ones, can be happier using their preferred payment methods. They create a repository for each of the new payment methods we support as a external package. Sometimes a developer in the team must work with different projects at the same time, the Web and the payment method in development.</p>

<p>In this scenario, one option is work on the payment package, tag, push, go to the base project and update dependencies with Composer. As you can see, it&#8217;s a bit slower, how we can improve this process? Composer to the rescue!</p>

<p>At <a href="https://github.com/restgames" target="_blank">RESTGames</a>, there is a battleship referee that makes two REST services play one against the other. It&#8217;s written in PHP and uses a helper PHP library with basic elements of Battleship game (Board, Ships, Shot, etc.) so you can create your own engine. Referee project depends upon the PHP library. When I improve the referee, sometimes I need to update the library. Sometimes it will be cool just to update the library in the &#8220;vendor&#8221; folder and commit the changes to the library from there.</p>

<p>Well, with Composer there is something similar for that. If you have both a project and its dependency cloned in your machine, you can define a Composer repository in your composer.json of &#8220;path&#8221; type that points to the library path. It&#8217;ll use a copy-and-paste o softlink (the cool one) strategy to &#8220;import&#8221; the dependency into the project.</p>

<p>From Composer&#8217;s web: &#8220;In addition to the artifact repository, you can use the path one, which allows you to depend on a relative directory. This can be especially useful when dealing with monolith repositories.&#8221;</p>

<p>Let&#8217;s take a look to the composer.json.</p>

<pre class="brush: php; gutter: true">{
    "name": "restgames/battleship-client",
    ...
    "repositories": [
        {
            "type": "path",
            "url": "../battleship-php",
            "options": {
                "symlink": true
            }
        }
    ],
    "require": {
        "restgames/battleship-php": "dev-master",
    },
...</pre>

<p>When running &#8220;composer install&#8221;, Composer will take a look to the folder. If the library exists, it will softlink it in your vendor folder. If it does not exist, it will try to find it in Packagist. Let&#8217;s see some snapshots.</p>

<p style="text-align: center;">
  <strong>Library cloned in local</strong>
</p>

<p><a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?ssl=1" rel="attachment wp-att-819"><img class="size-large wp-image-819 aligncenter" src="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?resize=620%2C389&#038;ssl=1" alt="Screen Shot 2016-03-24 at 16.18.36" width="620" height="389" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?resize=1024%2C642&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?resize=300%2C188&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?resize=768%2C481&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.18.36.png?w=1240&ssl=1 1240w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<p style="text-align: center;">
  <strong>Composer symlinked from local folder</strong>
</p>

<p><a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?ssl=1" rel="attachment wp-att-820"><img class="size-large wp-image-820 aligncenter" src="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?resize=620%2C389&#038;ssl=1" alt="Screen Shot 2016-03-24 at 16.21.04" width="620" height="389" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?resize=1024%2C642&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?resize=300%2C188&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?resize=768%2C481&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.04.png?w=1240&ssl=1 1240w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a></p>

<p style="text-align: center;">
  <strong>Library is renamed so Composer is not going to find it</strong>
</p>

<p style="text-align: center;">
   <a href="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?ssl=1" rel="attachment wp-att-821"><img class="alignnone size-large wp-image-821" src="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?resize=620%2C389&#038;ssl=1" alt="Screen Shot 2016-03-24 at 16.21.40" width="620" height="389" srcset="https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?resize=1024%2C642&ssl=1 1024w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?resize=300%2C188&ssl=1 300w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?resize=768%2C481&ssl=1 768w, https://i1.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.21.40.png?w=1240&ssl=1 1240w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a>
</p>

<p style="text-align: center;">
  <strong>Composer downloads from Packagist ;)</strong>
</p>

<p style="text-align: center;">
  <a href="https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?ssl=1" rel="attachment wp-att-822"><img class="alignnone size-large wp-image-822" src="https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?resize=620%2C389&#038;ssl=1" alt="Screen Shot 2016-03-24 at 16.22.03" width="620" height="389" srcset="https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?resize=1024%2C642&ssl=1 1024w, https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?resize=300%2C188&ssl=1 300w, https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?resize=768%2C481&ssl=1 768w, https://i0.wp.com/carlosbuenosvinos.com/posts/images/2016/03/Screen-Shot-2016-03-24-at-16.22.03.png?w=1240&ssl=1 1240w" sizes="(max-width: 620px) 100vw, 620px" data-recalc-dims="1" /></a>
</p>

<p>The only issue, is that all developers working in the project and the library needs to have cloned the library in the same folder name, not a big deal for such a benefit.</p>

<p>You can find more info at Composer documentation about Repositories (<a href="https://getcomposer.org/doc/05-repositories.md#path" target="_blank"><a href="https://getcomposer.org/doc/05-repositories.md#path">https://getcomposer.org/doc/05-repositories.md#path</a></a>)</p>

<h3 id="bonus-point-requested-via-twitter">Bonus Point (requested via twitter)</h3>

<p>You can define as many repositories as you want. Componer will try to find the package respecting the order defined in the composer.json file. For example, given the following composer.json:</p>

<pre class="brush: javascript; gutter: true">...
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/restgames/battleship-php"
        },
        {
            "type": "path",
            "url": "../battleship-php",
            "options": {
                "symlink": true
            }
        }
    ],
...</pre>

<p>Composer will try to find first on github without packagist, then in local, then in Packagist.</p><ul class="pa0">
  
   <li class="list">
     <a href="/tags/composer" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">composer</a>
   </li>
  
   <li class="list">
     <a href="/tags/dependencies" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">dependencies</a>
   </li>
  
   <li class="list">
     <a href="/tags/monolithic-repository" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">monolithic repository</a>
   </li>
  
   <li class="list">
     <a href="/tags/packagist" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">packagist</a>
   </li>
  
</ul>
<div class="mt6">
      
      
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/ipackagist-the-packagist-client-for-iphone/">iPackagist, the Packagist Client for iPhone</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/guia-para-el-desarrollo-profesional-php-edicion-2014/">Guía para el Desarrollo Profesional PHP (edición 2014)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/legacy-code-and-teams-series-composer/">Legacy Code and Teams Series: Composer</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://carlosbuenosvinos.com/" >
    &copy; 2019 Carlos Buenosvinos
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
