<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>constructor on Carlos Buenosvinos</title><link>https://carlosbuenosvinos.com/tags/constructor/</link><description>Recent content in constructor on Carlos Buenosvinos</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 24 Nov 2016 13:24:02 +0000</lastBuildDate><atom:link href="https://carlosbuenosvinos.com/tags/constructor/index.xml" rel="self" type="application/rss+xml"/><item><title>Firing Domain Events in the __constructor</title><link>https://carlosbuenosvinos.com/firing-domain-events-in-the-__constructor/</link><pubDate>Thu, 24 Nov 2016 13:24:02 +0000</pubDate><guid>https://carlosbuenosvinos.com/firing-domain-events-in-the-__constructor/</guid><description>&lt;p>After my post about &lt;!-- raw HTML omitted -->“Good ORMs do not call __construct a.k.a. where to fire my Domain Events”&lt;!-- raw HTML omitted -->, nice discussions (and trolling) are happening in the Barcelona Engineering Slack Channel. &lt;strong>Thanks to everyone for the feedback, ideas and concerns. You are more than welcome!&lt;/strong> The main concerns are:&lt;/p>
&lt;ol>
&lt;li>How do I fetch an Entity from ElasticSearch, using new and without firing the Event?&lt;/li>
&lt;li>How do I create stubs on the Entity that is firing the Domain Event?&lt;/li>
&lt;li>What are pros and cons of firing the Domain Event in the __constructor or in the named constructor?&lt;/li>
&lt;/ol>
&lt;p>So, I’ll take the original code as a starting point, and I’ll suggest different strategies to answer those questions. &lt;/p></description></item><item><title>Good ORMs do not call __construct a.k.a. where to fire my Domain Events</title><link>https://carlosbuenosvinos.com/good-orms-do-not-call-__construct/</link><pubDate>Thu, 24 Nov 2016 08:00:31 +0000</pubDate><guid>https://carlosbuenosvinos.com/good-orms-do-not-call-__construct/</guid><description>&lt;p>&lt;strong>tl;dr: Entity constructor should be called once in its entire life. That’s why good ORMs don’t use constructor to reconstitute objects from the database. Good ORMs use reflection, deserialization or proxies. So, fire your Domain Events in the constructor.&lt;/strong>&lt;/p>
&lt;p>Last week, I saw a presentation about going from &lt;!-- raw HTML omitted -->coupled-to-framework code to a Domain-Driven Design approach&lt;!-- raw HTML omitted --> in a sample application. It was a good talk. However, in my honest opinion, there were some mistakes that are important to address. In order not to troll, I have checked with the speakers to write this post ;).&lt;/p>
&lt;p>One of the mistakes, that I would like to point is &lt;em>where a Domain Event about “a new product was created”&lt;/em> should be trigger specifically inside the Product Entity.&lt;/p>
&lt;p>Speakers were showing a “Video” Entity with a named constructor called “create”. They were calling _new _inside the named constructor &lt;strong>and then&lt;/strong> firing the event. I mean, the Domain Event was not fired inside of the real constructor. Let’s see the code we’re talking about (the whole repository can be found &lt;!-- raw HTML omitted -->here&lt;!-- raw HTML omitted -->):&lt;/p></description></item></channel></rss>